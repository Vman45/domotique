<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="
       http://www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd
       http://camel.apache.org/schema/blueprint http://camel.apache.org/schema/blueprint/camel-blueprint.xsd">


	<camelContext xmlns="http://camel.apache.org/schema/blueprint"
		id="ITestFreeboxTV">

		<route id="ITV-Chaine">
			<from uri="direct:testSplitter" />
			<log message="[INTERFACE TV] Commande de chaine [${header.chaine}]"
				loggingLevel="INFO" logName="com.terrier.domotique.interfaces.tv" />
			<split>
				<method>channelSplitter</method>
				<log message="[INTERFACE TV] N° [${body}]" loggingLevel="INFO"
					logName="com.terrier.domotique.interfaces.tv" />
				<to uri="mock:result" />
			</split>
			<!-- Chaine 102 <setBody> <simple>1&amp;long=true</simple> </setBody> 
				<to uri="direct:itv-process-tv" /> <delay> <constant>{{interface-tv.tempo.touche}}</constant> 
				</delay> <setBody> <simple>0&amp;long=true</simple> </setBody> <to uri="direct:itv-process-tv" 
				/> <delay> <constant>{{interface-tv.tempo.touche}}</constant> </delay> <setBody> 
				<simple>2</simple> </setBody> <to uri="direct:itv-process-tv" /> -->
		</route>
	</camelContext>

	<!-- Trace des événements -->
	<bean id="channelSplitterTest"
		class="com.terrier.domotique.interfaces.tv.impl.ChannelSplitter" />

</blueprint>